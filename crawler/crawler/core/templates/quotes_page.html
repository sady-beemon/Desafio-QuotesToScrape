{% extends 'base.html' %}
{% load i18n static jazzmin admin_urls %}


{% block extrajs %}

<script type="text/javascript" src="{% static 'js/actions.js' %}"></script>

{% endblock  %}

{% block topbar %}
<div class="topbar">
    <h1>Quotess - quotes</h1>
    <a class="btn btn-primary mt-2 mb-2" href="{% url 'quotes_new' %}">Add quotes</a>

    <ul class="messages">
        {% for message in messages %}
        <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>
            {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}Important: {% endif %}
            {{ message }}
        </li>
        {% endfor %}
    </ul>
</div>
{% endblock %}


{% block sidebar %}
<div class="sidenav">
    <a href="">Usuario</a>
    <a href="{% url 'movies_page' %}">Movies</a>
    <a href="{% url 'quotes_page' %}" id="current_sidebar_page">Quotes</a>
</div>

{% endblock %}

{% block content %}
<div class="main">


    <form method="get" class="post-form">
        <div class="row g-3 w">
            <div class="col-md-6">
                <label for="search_field" class="col-sm-2 col-form-label col-form-label-sm">Pesquisar por conteudo</label>
                <input type="text" class="form-control form-control--date" name="search_field" value="{{request.GET.search_field}}">
            </div>    
            <div class="col-md-4">
                <label for="inputState" class="col-sm-2 col-form-label col-form-label-sm">Criador da frase</label>
                <select id="inputState" class="form-select" name="creator_selector">
                    <option {% if request.GET.minage_selector == '' %}selected{% endif %} value=''>---------------</option>
                    {% for creator in creators %}
                        <option {% if request.GET.creator_selector == '{{creator.creator}}' %}selected{% endif %} value='{{creator.creator}}'>{{creator.creator}}</option>
                    {% endfor %}
                </select>
            </div>    
        </div>  

        <button type="submit" class="btn btn-primary mt-2">Pesquisar</button>
    </form>


    <form method="post" action="">{% csrf_token %}
        <div class="col-md-3 mt-5">
            <select id="inputState" class="form-select" name="action_selector">
                <option {% if request.POST.action_selector == '' %}selected{% endif %} value=''>----Actions----</option>
                <option {% if request.POST.action_selector == 'delete_selected'%}selected{% endif %} value='delete_selected'>Delete selected</option>
            </select>            
        </div>

        <button type="submit" class="btn btn-primary m-2">Aplicar</button>


        <p id="selectedStatus">Select 0 out of {{counter}} movies</p>


        <table>
            <caption>Quotes</caption>
            
            <thead>
                <tr>
                    <th>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault top-checkbox" >
                        </div>
                    </th>
                    <th scope="col">Conteudo da frase</th>
                    <th scope="col">Author da frase</th>
                    <th scope="col">Tags da frase</th>
                    <th scope="col">Delete</th>

                </tr>
            </thead>
            <tbody>
            {% for quote in quotes %}
                <tr>
                    <td>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="flexCheckDefault checkbox" name="checkbox" value="{{quote.pk}}">
                        </div>
                    </td>
                    <td><a href="{% url 'quotes_edit' pk=quote.pk %}">{{quote.content}}</a></td>
                    <td>{{quote.creator}}</td>
                    <td>{{quote.tags}}</td>
                    <td><button><a style="color:red;" href="{% url 'quotes_delete' pk=quote.pk %}">excluir</a></button></td>
                </tr> 
            {% endfor %}
            </tbody>
        </table>
    </form>
</div>
{% endblock %}